<% if @page.files.empty? then %>
    <p><%= t(:no_files_uploaded) %></p>
<% else %>
    <table>
      <thead>
      <tr>
        <th><%= t(:file) %></th>
        <th><%= t(:uploader) %></th>
        <th><%= t(:size) %></th>
        <th><%= t(:time) %></th>
      </tr>
      </thead>
      <tbody>
      <% for file in @page.files %>
          <tr>
            <% if file.respond_to? :user %>
                <td><%= link_to file.filename, file.filename %></td>
                <td><% if file.user.nil? %><%= t(:unknown) %><% else %><%= h file.user.full_name %><% end %></td>
                <td><%= number_to_human_size(File.size("shared/upload" + @page.get_path + file.filename), :precision => 2) %></td>
                <td><%= File.atime("shared/upload" + @page.get_path + file.filename).localtime.strftime("%H:%M:%S %d %b %Y") %></td>
            <% else %>
                <td><%= link_to file, file %></td>
                <td><%= t(:unknown) %></td>
                <td><%= number_to_human_size(File.size("shared/upload" + @page.get_path + file), :precision => 2) %></td>
                <td><%= File.atime("shared/upload" + @page.get_path + file).localtime.strftime("%H:%M:%S %d %b %Y") %></td>
            <% end %>
          </tr>
      <% end %>
      </tbody>
    </table>
<% end %>